{
  "name": "Ansible Toolbox",
  "dockerComposeFile": ["../compose.yaml"],        // compose.yaml is one folder up
  "service": "ansible",
  "workspaceFolder": "/workspace",
  "overrideCommand": false,

  "containerEnv": {
    "ANSIBLE_INVENTORY": "/workspace/inventories/dev/hosts.ini"
  },

  "customizations": {
    "vscode": {
      "extensions": [
        "redhat.ansible",
        "redhat.vscode-yaml",
        "ms-azuretools.vscode-docker"
      ]
    }
  },

  // Auto-install Docker CLI each time the devcontainer starts,
  // then show Ansible + inventory so you know it’s ready.
  "postStartCommand": "apk update && apk add --no-cache docker-cli docker-cli-compose && ansible --version && ansible-inventory --graph || true"
}
